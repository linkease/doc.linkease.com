### 本次更新仅 Rockchip 系列

### 应用
* iStore：支持仅通过 IPv4 下载文件，因为部分运营商 IPv6 访问 CDN 太慢。可在 iStore 的维护页面打开
* 在线升级：
  1. 支持仅通过 IPv4 下载固件。在线升级新增了一个“配置”页签，可以打开此功能
  2. 检查固件更新的结果缓存5分钟

### 设备
* RK35xx系列：全系列开启 ramoops，方便故障排查。ramoops 使用 bootloader 保留的几百 KB 专用内存，不会占用额外的系统可用内存

### 关于 ramoops
ramoops （pstore）在内存保留一段数据，这部分内存在软重启（关机再开机不算软重启）后不会被重置。当内核发生崩溃事件时，ramoops 能保留本次内核日志，内核自动重启以后，可以在 `/sys/fs/pstore` 下看到 `dmsg-` 开头的文件，这就是崩溃时的日志。
此外，还有以 `console-` 开头的文件，则是软重启前的内核日志（无论有没有发生崩溃）。

`/sys/fs/pstore` 下所有文件都有修改时间，除非手动删除或关机，不然文件会一直存在（新的同名日志产生时会覆盖已有日志）。假设某次内核崩溃，产生了 `dmsg-` 文件，那么之后多次重启都还会一直存在，所以存在 `dmsg-` 文件不代表上一次运行崩溃，只能证明上一次开机以来崩溃过，排查故障时要注意文件修改时间。

如何确认 ramoops 能正常工作？最简单的方式就是 `reboot` 命令重启一次（不要关机或者断电重启），如果 `/sys/fs/pstore` 下出现 `console-` 开头的文件，那就正常，否则就是不支持。

**ramoops 能正常工作的情况下**，要排查系统重启的原因就很简单了：
1. 如果  `/sys/fs/pstore`  没有文件，那就是电源重新上电（停电后来电）或系统关机后重新开机（一般是开关机按钮）。
2. 如果  `/sys/fs/pstore`  下的 `console-` 文件包含 “System Shutting Down” 那就说明系统是正常软重启（不管是reboot命令，web后台点重启，还是定时任务重启）。
3. 如果  `/sys/fs/pstore`  下的 `console-` 文件不包含  “System Shutting Down” 那就说明内核崩溃了，那么应该存在 `dmsg-` 文件且修改时间跟 `console-` 文件差不多，这两个文件末尾都应该包含了内核崩溃日志，可用于定位内核bug。


# 其他
- EasePi R1 已获得 OpenWrt 官方支持，OpenWrt 24.10.5 原版固件可从这里下载： https://downloads.openwrt.org/releases/24.10.5/targets/rockchip/armv8/ 
- 刷机方式参考此页面中的说明： https://fw.koolcenter.com/iStoreOS/alpha/openwrt/easepi-r1/

